#!/bin/bash

echo "[TASK 1]  "Ssh-keygen"
ssh-keygen
cat >>~/.ssh/config<<EOF
Host ceph-node-1
        Hostname ceph-node-1
        User vagrant

Host ceph-node-2
        Hostname ceph-node-2
        User vagrant

Host ceph-node-3
        Hostname ceph-node-3
        User vagrant
EOF
chmod 600 ~/.ssh/config

echo "[TASK 2]  "Ssh-copy-id"
ssh-copy-id vagrant@ceph-node-1
ssh-copy-id vagrant@ceph-node-2
ssh-copy-id vagrant@ceph-node-3

echo "[TASK 3]  "Install Ceph-Deploy"
sudo yum install ceph-deploy
mkdir ceph-cluster
cd ceph-cluster

ceph-deploy new ceph-node-1 ceph-node-2 ceph-node-3

ceph-deploy install --release nautilus ceph-node-1 ceph-node-2 ceph-node-3

ceph-deploy mon create-initial

ceph-deploy admin ceph-node-1 ceph-node-2 ceph-node-3

ceph-deploy mgr create ceph-node-1

ceph-deploy mds create ceph-node-1 ceph-node-2 ceph-node-3



